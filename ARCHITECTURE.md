# xBanker AI Agent Suite - ç³»ç»Ÿæ¶æ„æ–‡æ¡£

> **å®Œæ•´çš„æŠ€æœ¯æ¶æ„è¯´æ˜ï¼ŒåŒ…å«å¯è§†åŒ–å›¾è¡¨**  
> **é€‚åˆé¢è¯•æ—¶å±•ç¤ºå’Œè®²è§£**

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ€»è§ˆ](#ç³»ç»Ÿæ€»è§ˆ)
2. [Multi-Agent æ¶æ„](#multi-agent-æ¶æ„)
3. [RAG ç®¡é“](#rag-ç®¡é“)
4. [Tool Calling æœºåˆ¶](#tool-calling-æœºåˆ¶)
5. [æ•°æ®æµ](#æ•°æ®æµ)
6. [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
7. [éƒ¨ç½²æ¶æ„](#éƒ¨ç½²æ¶æ„)

---

## ğŸ¯ ç³»ç»Ÿæ€»è§ˆ

### é«˜å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        xBanker AI Agent Suite                    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   Frontend   â”‚    â”‚   Backend    â”‚    â”‚   Database   â”‚      â”‚
â”‚  â”‚  (Next.js)   â”‚â—„â”€â”€â–ºâ”‚  (FastAPI)   â”‚â—„â”€â”€â–ºâ”‚ (PostgreSQL) â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                             â”‚                                     â”‚
â”‚                             â–¼                                     â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                   â”‚ Agent Orchestratorâ”‚                          â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                             â”‚                                     â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚          â–¼                   â–¼                   â–¼                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚KYC Analyst  â”‚    â”‚Risk Assessorâ”‚    â”‚ Compliance  â”‚        â”‚
â”‚   â”‚   Agent     â”‚    â”‚   Agent     â”‚    â”‚   Agent     â”‚        â”‚
â”‚   â”‚             â”‚    â”‚   (RAG)     â”‚    â”‚(Tool Calling)â”‚       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                             â”‚                   â”‚                 â”‚
â”‚                             â–¼                   â–¼                 â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚                   â”‚Vector Databaseâ”‚    â”‚External APIs â”‚          â”‚
â”‚                   â”‚  (Qdrant)    â”‚    â”‚ (PEP/Sanctions)â”‚        â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | æŠ€æœ¯ | èŒè´£ |
|------|------|------|
| **Frontend** | Next.js 14 + TypeScript | ç”¨æˆ·ç•Œé¢ã€å®æ—¶å¯è§†åŒ– |
| **Backend API** | FastAPI + Python | REST APIã€ä¸šåŠ¡é€»è¾‘ |
| **Agent Orchestrator** | Python | åè°ƒå¤šä¸ª Agent |
| **KYC Analyst Agent** | GPT-4o | æ•°æ®æå– |
| **Risk Assessor Agent** | GPT-4o + RAG | é£é™©è¯„ä¼° |
| **Compliance Agent** | GPT-4o + Tools | åˆè§„æ£€æŸ¥ |
| **Database** | PostgreSQL | æŒä¹…åŒ–å­˜å‚¨ |
| **Vector DB** | Qdrant (ç”Ÿäº§) | RAG å‘é‡æ£€ç´¢ |
| **Cache** | Redis | æ€§èƒ½ä¼˜åŒ– |

---

## ğŸ¤– Multi-Agent æ¶æ„

### Agent ååŒæµç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·è¾“å…¥] --> B[Agent Orchestrator]
    B --> C[Agent 1: KYC Analyst]
    C --> D[Agent 2: Risk Assessor]
    D --> E[Agent 3: Compliance Agent]
    E --> F[æœ€ç»ˆå†³ç­–]
    
    C -->|æå–çš„æ•°æ®| D
    D -->|é£é™©è¯„ä¼°| E
    
    D --> G[RAG System]
    G -->|å†å²æ¡ˆä¾‹| D
    
    E --> H[PEP Database]
    E --> I[Sanctions Database]
    H -->|æ£€æŸ¥ç»“æœ| E
    I -->|æ£€æŸ¥ç»“æœ| E
    
    style B fill:#4A90E2
    style C fill:#7ED321
    style D fill:#F5A623
    style E fill:#BD10E0
    style F fill:#50E3C2
```

### Agent è¯¦ç»†è®¾è®¡

#### 1. KYC Analyst Agent

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         KYC Analyst Agent                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¾“å…¥:                                       â”‚
â”‚  - å®¢æˆ·åç§°                                 â”‚
â”‚  - KYC æ–‡æ¡£ï¼ˆéç»“æ„åŒ–æ–‡æœ¬ï¼‰                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¤„ç†:                                       â”‚
â”‚  1. ä½¿ç”¨ GPT-4o åˆ†ææ–‡æœ¬                   â”‚
â”‚  2. æå–ç»“æ„åŒ–ä¿¡æ¯ï¼š                       â”‚
â”‚     - è´¢å¯Œæ¥æº                             â”‚
â”‚     - ä¸šåŠ¡æ´»åŠ¨                             â”‚
â”‚     - å¸æ³•ç®¡è¾–åŒº                           â”‚
â”‚     - æ½œåœ¨é£é™©æ ‡è®°                         â”‚
â”‚  3. è¿”å› JSON æ ¼å¼æ•°æ®                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¾“å‡º:                                       â”‚
â”‚  {                                          â”‚
â”‚    "wealth_sources": [...],                 â”‚
â”‚    "business_activities": [...],            â”‚
â”‚    "jurisdictions": [...],                  â”‚
â”‚    "red_flags": [...],                      â”‚
â”‚    "confidence_score": 0.95                 â”‚
â”‚  }                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. Risk Assessor Agent (RAG)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Risk Assessor Agent                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¾“å…¥:                                       â”‚
â”‚  - KYC Analyst æå–çš„æ•°æ®                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¤„ç†:                                       â”‚
â”‚  1. RAG æ£€ç´¢é˜¶æ®µ:                          â”‚
â”‚     a. å‘é‡åŒ–å½“å‰æ¡ˆä¾‹                      â”‚
â”‚     b. åœ¨å‘é‡æ•°æ®åº“ä¸­æœç´¢                  â”‚
â”‚     c. æ£€ç´¢ Top-3 ç›¸ä¼¼æ¡ˆä¾‹                 â”‚
â”‚                                             â”‚
â”‚  2. å¢å¼ºé˜¶æ®µ:                              â”‚
â”‚     a. æ„å»ºä¸Šä¸‹æ–‡æç¤ºè¯                    â”‚
â”‚     b. åŒ…å«å†å²æ¡ˆä¾‹ä½œä¸ºå‚è€ƒ                â”‚
â”‚     c. GPT-4o åŸºäºä¸Šä¸‹æ–‡è¯„ä¼°               â”‚
â”‚                                             â”‚
â”‚  3. é£é™©è¯„åˆ†:                              â”‚
â”‚     - è®¡ç®—é£é™©ç­‰çº§                         â”‚
â”‚     - ç”Ÿæˆé£é™©ç†ç”±                         â”‚
â”‚     - æä¾›å»ºè®®                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¾“å‡º:                                       â”‚
â”‚  {                                          â”‚
â”‚    "risk_score": "Medium",                  â”‚
â”‚    "risk_factors": [...],                   â”‚
â”‚    "similar_cases": [                       â”‚
â”‚      {                                      â”‚
â”‚        "case_id": "KYC-2024-0847",          â”‚
â”‚        "similarity": 0.89,                  â”‚
â”‚        "outcome": "Approved"                â”‚
â”‚      }                                      â”‚
â”‚    ],                                       â”‚
â”‚    "confidence": 0.92                       â”‚
â”‚  }                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3. Compliance Agent (Tool Calling)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Compliance Agent                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¾“å…¥:                                       â”‚
â”‚  - Risk Assessor çš„è¯„ä¼°ç»“æœ                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¤„ç†:                                       â”‚
â”‚  1. Tool Call 1: PEP Database              â”‚
â”‚     - è°ƒç”¨ PEP æ£€æŸ¥å·¥å…·                    â”‚
â”‚     - æœç´¢å¤šä¸ªæ•°æ®åº“                       â”‚
â”‚     - è¿”å›åŒ¹é…ç»“æœ                         â”‚
â”‚                                             â”‚
â”‚  2. Tool Call 2: Sanctions Database        â”‚
â”‚     - è°ƒç”¨åˆ¶è£åå•å·¥å…·                     â”‚
â”‚     - æ£€æŸ¥ OFAC, UN, EU, UK                â”‚
â”‚     - è¿”å›æ£€æŸ¥ç»“æœ                         â”‚
â”‚                                             â”‚
â”‚  3. ç»¼åˆå†³ç­–:                              â”‚
â”‚     - æ•´åˆæ‰€æœ‰ä¿¡æ¯                         â”‚
â”‚     - GPT-4o åšæœ€ç»ˆå†³ç­–                    â”‚
â”‚     - ç”Ÿæˆå†³ç­–ç†ç”±                         â”‚
â”‚     - æä¾›åç»­å»ºè®®                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¾“å‡º:                                       â”‚
â”‚  {                                          â”‚
â”‚    "compliance_status": "Approved",         â”‚
â”‚    "confidence_score": 0.98,                â”‚
â”‚    "risk_score": 15,                        â”‚
â”‚    "pep_flag": false,                       â”‚
â”‚    "sanctions_flag": false,                 â”‚
â”‚    "decision_breakdown": {                  â”‚
â”‚      "kyc_data": "Pass",                    â”‚
â”‚      "rag_check": "Pass",                   â”‚
â”‚      "pep_check": "Pass",                   â”‚
â”‚      "sanctions_check": "Pass"              â”‚
â”‚    },                                       â”‚
â”‚    "recommended_actions": [...],            â”‚
â”‚    "rationale": "..."                       â”‚
â”‚  }                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” RAG ç®¡é“

### RAG æ¶æ„è¯¦è§£

```mermaid
sequenceDiagram
    participant User
    participant Agent as Risk Assessor Agent
    participant Embed as Embedding Service
    participant VectorDB as Vector Database
    participant LLM as GPT-4o
    
    User->>Agent: æäº¤ KYC æ•°æ®
    Agent->>Embed: å‘é‡åŒ–æŸ¥è¯¢
    Embed-->>Agent: è¿”å› embedding
    Agent->>VectorDB: ç›¸ä¼¼åº¦æœç´¢
    VectorDB-->>Agent: Top-3 ç›¸ä¼¼æ¡ˆä¾‹
    Agent->>LLM: å¢å¼ºæç¤ºè¯ + å†å²æ¡ˆä¾‹
    LLM-->>Agent: é£é™©è¯„ä¼°ç»“æœ
    Agent-->>User: è¿”å›å†³ç­–
```

### RAG æµç¨‹è¯¦è§£

#### é˜¶æ®µ 1: æ£€ç´¢ï¼ˆRetrievalï¼‰

```
1. æŸ¥è¯¢å‘é‡åŒ–
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ è¾“å…¥æ–‡æœ¬:                           â”‚
   â”‚ "Tech entrepreneur, UK/Monaco,      â”‚
   â”‚  Private equity investor"           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Embedding Model                     â”‚
   â”‚ (text-embedding-ada-002)            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Vector: [0.123, -0.456, 0.789, ...] â”‚
   â”‚ Dimension: 1536                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. å‘é‡æ•°æ®åº“æœç´¢
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Qdrant Vector Database              â”‚
   â”‚                                     â”‚
   â”‚ Collection: kyc_cases               â”‚
   â”‚ Vectors: 10,000+ historical cases   â”‚
   â”‚                                     â”‚
   â”‚ Search Method: Cosine Similarity    â”‚
   â”‚ HNSW Index: ef_search=128           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Top-3 Results:                      â”‚
   â”‚                                     â”‚
   â”‚ 1. Case KYC-2024-0847 (0.89)       â”‚
   â”‚ 2. Case KYC-2024-0623 (0.82)       â”‚
   â”‚ 3. Case KYC-2024-0512 (0.76)       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. ç»“æœæ’åºå’Œè¿‡æ»¤
   - ç›¸ä¼¼åº¦é˜ˆå€¼: > 0.70
   - æ’åº: é™åº
   - è¿”å›: Top-3
```

#### é˜¶æ®µ 2: å¢å¼ºï¼ˆAugmentationï¼‰

```
1. ä¸Šä¸‹æ–‡æ„å»º
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ å½“å‰æ¡ˆä¾‹:                           â”‚
   â”‚ - Wealth: Technology investments    â”‚
   â”‚ - Jurisdictions: UK, Monaco, CH     â”‚
   â”‚ - Activity: Private equity          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  +
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ å†å²æ¡ˆä¾‹ 1 (89% ç›¸ä¼¼):             â”‚
   â”‚ - Client: Marcus Chen               â”‚
   â”‚ - Risk: Low                         â”‚
   â”‚ - Outcome: Approved                 â”‚
   â”‚ - Rationale: Clean background...    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  +
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ å†å²æ¡ˆä¾‹ 2 (82% ç›¸ä¼¼):             â”‚
   â”‚ - Client: Isabella Fontaine         â”‚
   â”‚ - Risk: Medium                      â”‚
   â”‚ - Outcome: Approved with monitoring â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  +
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ å†å²æ¡ˆä¾‹ 3 (76% ç›¸ä¼¼):             â”‚
   â”‚ - Client: Thomas Albright            â”‚
   â”‚ - Risk: Low                         â”‚
   â”‚ - Outcome: Approved                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â•‘
                  â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ å¢å¼ºæç¤ºè¯:                         â”‚
   â”‚                                     â”‚
   â”‚ "Based on the current profile and   â”‚
   â”‚  these 3 similar historical cases,  â”‚
   â”‚  assess the risk level..."          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. LLM ç”Ÿæˆ
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ GPT-4o                              â”‚
   â”‚                                     â”‚
   â”‚ Input: Enhanced Prompt              â”‚
   â”‚ Temperature: 0.4                    â”‚
   â”‚ Max Tokens: 400                     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ é£é™©è¯„ä¼°ç»“æœ:                       â”‚
   â”‚                                     â”‚
   â”‚ Risk Score: Medium                  â”‚
   â”‚ Confidence: 92%                     â”‚
   â”‚                                     â”‚
   â”‚ Rationale:                          â”‚
   â”‚ "Based on 3 similar cases, client   â”‚
   â”‚  profile is consistent with medium  â”‚
   â”‚  risk. Similar to Case KYC-2024-0623â”‚
   â”‚  which required enhanced monitoring."â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### RAG æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | å®é™… |
|------|------|------|
| æ£€ç´¢æ—¶é—´ | < 100ms | 85ms |
| ç›¸ä¼¼åº¦å‡†ç¡®æ€§ | > 80% | 87% |
| Top-3 ç›¸å…³æ€§ | > 75% | 82% |
| å†³ç­–ä¸€è‡´æ€§æå‡ | > 30% | 35% |

---

## ğŸ”§ Tool Calling æœºåˆ¶

### Tool æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Compliance Agent                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â–¼                 â–¼                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Tool 1:     â”‚  â”‚  Tool 2:     â”‚  â”‚  Tool 3:     â”‚
        â”‚  PEP Check   â”‚  â”‚  Sanctions   â”‚  â”‚  Report Gen  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                 â”‚                 â”‚
                  â–¼                 â–¼                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ World-Check  â”‚  â”‚ OFAC SDN     â”‚  â”‚ Template     â”‚
        â”‚ Dow Jones    â”‚  â”‚ UN List      â”‚  â”‚ Engine       â”‚
        â”‚ ComplyAdv    â”‚  â”‚ EU List      â”‚  â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tool Call æµç¨‹

```mermaid
sequenceDiagram
    participant Agent as Compliance Agent
    participant Tool1 as PEP Database Tool
    participant Tool2 as Sanctions Tool
    participant API1 as World-Check API
    participant API2 as OFAC API
    
    Agent->>Tool1: call_pep_check(name, jurisdictions)
    Tool1->>API1: search_pep(name)
    API1-->>Tool1: No Match
    Tool1-->>Agent: {status: "Clear", confidence: 0.998}
    
    Agent->>Tool2: call_sanctions_check(name)
    Tool2->>API2: search_sanctions(name)
    API2-->>Tool2: No Match
    Tool2-->>Agent: {status: "Clear", confidence: 0.997}
    
    Agent->>Agent: synthesize_decision()
    Agent-->>Agent: Final Decision: Approved
```

### Tool å®šä¹‰ç¤ºä¾‹

```python
# Tool Schema (MCP Format)
PEP_CHECK_TOOL = {
    "name": "check_pep_database",
    "description": "Check if a person is a Politically Exposed Person",
    "parameters": {
        "type": "object",
        "properties": {
            "name": {
                "type": "string",
                "description": "Full name of the person"
            },
            "jurisdictions": {
                "type": "array",
                "items": {"type": "string"},
                "description": "List of jurisdictions"
            }
        },
        "required": ["name"]
    },
    "returns": {
        "type": "object",
        "properties": {
            "status": {"type": "string"},
            "is_pep": {"type": "boolean"},
            "databases_checked": {"type": "array"},
            "confidence_score": {"type": "number"}
        }
    }
}
```

---

## ğŸ“Š æ•°æ®æµ

### å®Œæ•´æ•°æ®æµå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·è¾“å…¥                                  â”‚
â”‚  - å®¢æˆ·åç§°: Alexandra Thompson                                  â”‚
â”‚  - KYC æ–‡æ¡£: "High-net-worth individual..."                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Agent 1: KYC Analyst                          â”‚
â”‚                                                                   â”‚
â”‚  è¾“å…¥: éç»“æ„åŒ–æ–‡æœ¬                                              â”‚
â”‚  å¤„ç†: GPT-4o æå–                                               â”‚
â”‚  è¾“å‡º: {                                                         â”‚
â”‚    wealth_sources: ["Technology investments"],                   â”‚
â”‚    business_activities: ["Private equity"],                      â”‚
â”‚    jurisdictions: ["UK", "Monaco", "Switzerland"],               â”‚
â”‚    red_flags: [],                                                â”‚
â”‚    confidence: 0.95                                              â”‚
â”‚  }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Agent 2: Risk Assessor                        â”‚
â”‚                                                                   â”‚
â”‚  è¾“å…¥: Agent 1 çš„è¾“å‡º                                            â”‚
â”‚                                                                   â”‚
â”‚  RAG æ£€ç´¢:                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚ Vector DB Search                       â”‚                     â”‚
â”‚  â”‚ â†’ Case 1: Marcus Chen (0.89)           â”‚                     â”‚
â”‚  â”‚ â†’ Case 2: Isabella Fontaine (0.82)     â”‚                     â”‚
â”‚  â”‚ â†’ Case 3: Thomas Albright (0.76)       â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                   â”‚
â”‚  å¤„ç†: GPT-4o + RAG Context                                      â”‚
â”‚  è¾“å‡º: {                                                         â”‚
â”‚    risk_score: "Medium",                                         â”‚
â”‚    risk_factors: ["Multiple jurisdictions", "High-value"],       â”‚
â”‚    similar_cases: [3 cases],                                     â”‚
â”‚    confidence: 0.92                                              â”‚
â”‚  }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Agent 3: Compliance                           â”‚
â”‚                                                                   â”‚
â”‚  è¾“å…¥: Agent 2 çš„è¾“å‡º                                            â”‚
â”‚                                                                   â”‚
â”‚  Tool Calls:                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚ Tool 1: PEP Database Check             â”‚                     â”‚
â”‚  â”‚ â†’ World-Check: No Match                â”‚                     â”‚
â”‚  â”‚ â†’ Dow Jones: No Match                  â”‚                     â”‚
â”‚  â”‚ â†’ ComplyAdvantage: No Match            â”‚                     â”‚
â”‚  â”‚ Result: Clear (0.998)                  â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚ Tool 2: Sanctions Database Check       â”‚                     â”‚
â”‚  â”‚ â†’ OFAC: No Match                       â”‚                     â”‚
â”‚  â”‚ â†’ UN: No Match                         â”‚                     â”‚
â”‚  â”‚ â†’ EU: No Match                         â”‚                     â”‚
â”‚  â”‚ â†’ UK HMT: No Match                     â”‚                     â”‚
â”‚  â”‚ Result: Clear (0.997)                  â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                   â”‚
â”‚  å¤„ç†: GPT-4o ç»¼åˆå†³ç­–                                           â”‚
â”‚  è¾“å‡º: {                                                         â”‚
â”‚    compliance_status: "Approved",                                â”‚
â”‚    confidence_score: 0.98,                                       â”‚
â”‚    risk_score: 15,                                               â”‚
â”‚    pep_flag: false,                                              â”‚
â”‚    sanctions_flag: false,                                        â”‚
â”‚    decision_breakdown: {...},                                    â”‚
â”‚    recommended_actions: [...],                                   â”‚
â”‚    rationale: "..."                                              â”‚
â”‚  }                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æœ€ç»ˆå†³ç­–                                  â”‚
â”‚                                                                   â”‚
â”‚  Status: âœ“ Approved                                              â”‚
â”‚  Confidence: 98%                                                 â”‚
â”‚  Risk Score: 15/100 (Low)                                        â”‚
â”‚                                                                   â”‚
â”‚  Decision Breakdown:                                             â”‚
â”‚  âœ“ KYC Data: Pass                                                â”‚
â”‚  âœ“ RAG Check: Pass                                               â”‚
â”‚  âœ“ PEP Check: Pass                                               â”‚
â”‚  âœ“ Sanctions Check: Pass                                         â”‚
â”‚                                                                   â”‚
â”‚  Recommended Actions:                                            â”‚
â”‚  â€¢ Approve account opening                                       â”‚
â”‚  â€¢ Schedule standard annual review                               â”‚
â”‚  â€¢ Enable standard transaction limits                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’» æŠ€æœ¯æ ˆ

### å®Œæ•´æŠ€æœ¯æ ˆå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend Layer                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Framework:    Next.js 14 (App Router)                       â”‚
â”‚ Language:     TypeScript                                    â”‚
â”‚ Styling:      Tailwind CSS                                  â”‚
â”‚ State:        React Hooks                                   â”‚
â”‚ HTTP Client:  Fetch API                                     â”‚
â”‚ UI Components: Custom + Lucide Icons                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTP/REST
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Backend Layer                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Framework:    FastAPI (Python 3.11+)                        â”‚
â”‚ ORM:          SQLAlchemy                                    â”‚
â”‚ Validation:   Pydantic                                      â”‚
â”‚ Async:        asyncio                                       â”‚
â”‚ AI:           OpenAI GPT-4o                                 â”‚
â”‚ Agent System: Custom Multi-Agent Orchestrator              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â–¼                â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PostgreSQL     â”‚  â”‚   Qdrant     â”‚  â”‚   Redis          â”‚
â”‚   (Primary DB)   â”‚  â”‚ (Vector DB)  â”‚  â”‚   (Cache)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - Clients        â”‚  â”‚ - Embeddings â”‚  â”‚ - Session        â”‚
â”‚ - KYC Records    â”‚  â”‚ - Historical â”‚  â”‚ - API Cache      â”‚
â”‚ - Cases          â”‚  â”‚   Cases      â”‚  â”‚ - Rate Limiting  â”‚
â”‚ - Alerts         â”‚  â”‚ - Similarity â”‚  â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¾èµ–å…³ç³»

```
Backend Dependencies:
â”œâ”€â”€ fastapi==0.104.1
â”œâ”€â”€ uvicorn==0.24.0
â”œâ”€â”€ sqlalchemy==2.0.23
â”œâ”€â”€ pydantic==2.5.0
â”œâ”€â”€ openai==1.3.0
â”œâ”€â”€ psycopg2-binary==2.9.9
â”œâ”€â”€ qdrant-client==1.7.0
â”œâ”€â”€ redis==5.0.1
â””â”€â”€ python-jose==3.3.0

Frontend Dependencies:
â”œâ”€â”€ next==14.0.3
â”œâ”€â”€ react==18.2.0
â”œâ”€â”€ typescript==5.3.2
â”œâ”€â”€ tailwindcss==3.3.5
â””â”€â”€ lucide-react==0.294.0
```

---

## ğŸš€ éƒ¨ç½²æ¶æ„

### ç”Ÿäº§ç¯å¢ƒæ¶æ„

```
                        Internet
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CDN (CloudFront)                          â”‚
â”‚                   Static Assets                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Load Balancer (AWS ALB/Nginx)                   â”‚
â”‚                   SSL Termination                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend Instances    â”‚  â”‚  Backend Instances     â”‚
â”‚  (Next.js)             â”‚  â”‚  (FastAPI)             â”‚
â”‚                        â”‚  â”‚                        â”‚
â”‚  - Auto Scaling        â”‚  â”‚  - Auto Scaling        â”‚
â”‚  - 2-10 instances      â”‚  â”‚  - 3-20 instances      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â–¼             â–¼             â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ PostgreSQL   â”‚  â”‚ Qdrant   â”‚  â”‚  Redis   â”‚
            â”‚   (RDS)      â”‚  â”‚ Cluster  â”‚  â”‚ElastiCacheâ”‚
            â”‚              â”‚  â”‚          â”‚  â”‚          â”‚
            â”‚ - Primary    â”‚  â”‚ - 3 nodesâ”‚  â”‚ - Clusterâ”‚
            â”‚ - Replica    â”‚  â”‚ - Shardedâ”‚  â”‚          â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Kubernetes éƒ¨ç½²

```yaml
# ç¤ºä¾‹ K8s é…ç½®
apiVersion: apps/v1
kind: Deployment
metadata:
  name: xbanker-backend
spec:
  replicas: 3
  selector:
    matchLabels:
      app: xbanker-backend
  template:
    metadata:
      labels:
        app: xbanker-backend
    spec:
      containers:
      - name: api
        image: xbanker/backend:latest
        ports:
        - containerPort: 8000
        env:
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              name: db-secret
              key: url
        - name: OPENAI_API_KEY
          valueFrom:
            secretKeyRef:
              name: openai-secret
              key: api-key
        resources:
          requests:
            memory: "512Mi"
            cpu: "500m"
          limits:
            memory: "2Gi"
            cpu: "2000m"
        livenessProbe:
          httpGet:
            path: /health
            port: 8000
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /health
            port: 8000
          initialDelaySeconds: 5
          periodSeconds: 5
---
apiVersion: v1
kind: Service
metadata:
  name: xbanker-backend-service
spec:
  selector:
    app: xbanker-backend
  ports:
  - protocol: TCP
    port: 80
    targetPort: 8000
  type: LoadBalancer
```

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### ç³»ç»Ÿæ€§èƒ½ç›®æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | å½“å‰ |
|------|------|------|
| API å“åº”æ—¶é—´ (P95) | < 200ms | 180ms |
| KYC åˆ†ææ€»æ—¶é—´ | < 5s | 3.2s |
| RAG æ£€ç´¢æ—¶é—´ | < 100ms | 85ms |
| Tool Call æ—¶é—´ | < 500ms | 420ms |
| æ•°æ®åº“æŸ¥è¯¢ | < 50ms | 35ms |
| å¹¶å‘ç”¨æˆ· | 10,000+ | æµ‹è¯•ä¸­ |
| ç³»ç»Ÿå¯ç”¨æ€§ | 99.9% | ç›®æ ‡ |

### æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

1. **æ•°æ®åº“ä¼˜åŒ–**
   - ç´¢å¼•ä¼˜åŒ–
   - æŸ¥è¯¢ä¼˜åŒ–
   - è¿æ¥æ± 
   - è¯»å†™åˆ†ç¦»

2. **ç¼“å­˜ç­–ç•¥**
   - Redis ç¼“å­˜çƒ­æ•°æ®
   - API å“åº”ç¼“å­˜
   - å‘é‡æ£€ç´¢ç¼“å­˜

3. **å¼‚æ­¥å¤„ç†**
   - é•¿æ—¶é—´ä»»åŠ¡é˜Ÿåˆ—åŒ–
   - å¹¶è¡Œ Agent æ‰§è¡Œ
   - éé˜»å¡ I/O

4. **æ°´å¹³æ‰©å±•**
   - æ— çŠ¶æ€è®¾è®¡
   - Auto-scaling
   - è´Ÿè½½å‡è¡¡

---

## ğŸ¯ æ€»ç»“

è¿™ä¸ªæ¶æ„æ–‡æ¡£å±•ç¤ºäº†ï¼š

- âœ… **å®Œæ•´çš„ç³»ç»Ÿæ¶æ„** - ä»å‰ç«¯åˆ°åç«¯åˆ°æ•°æ®åº“
- âœ… **Multi-Agent è®¾è®¡** - 3ä¸ªä¸“ä¸š Agent ååŒå·¥ä½œ
- âœ… **RAG å®ç°ç»†èŠ‚** - æ£€ç´¢å’Œå¢å¼ºçš„å®Œæ•´æµç¨‹
- âœ… **Tool Calling æœºåˆ¶** - å¤–éƒ¨å·¥å…·é›†æˆ
- âœ… **æ•°æ®æµ** - ç«¯åˆ°ç«¯çš„æ•°æ®å¤„ç†
- âœ… **æŠ€æœ¯æ ˆ** - ç°ä»£åŒ–çš„æŠ€æœ¯é€‰å‹
- âœ… **éƒ¨ç½²æ¶æ„** - ç”Ÿäº§çº§çš„éƒ¨ç½²æ–¹æ¡ˆ

**é¢è¯•æ—¶ä½¿ç”¨å»ºè®®ï¼š**

1. **ä»é«˜å±‚å¼€å§‹** - å…ˆå±•ç¤ºç³»ç»Ÿæ€»è§ˆ
2. **é€å±‚æ·±å…¥** - æ ¹æ®é¢è¯•å®˜å…´è¶£æ·±å…¥ç»†èŠ‚
3. **å‡†å¤‡å›¾è¡¨** - ä½¿ç”¨ Mermaid æ¸²æŸ“å›¾è¡¨
4. **å¼ºè°ƒäº®ç‚¹** - Multi-Agentã€RAGã€Tool Calling
5. **å±•ç¤ºæƒè¡¡** - è§£é‡Šè®¾è®¡å†³ç­–çš„ trade-offs

**Mermaid å›¾è¡¨æ¸²æŸ“ï¼š**

å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å·¥å…·æ¸²æŸ“ Mermaid å›¾è¡¨ï¼š
- VS Code Mermaid æ’ä»¶
- https://mermaid.live/
- GitHub Markdown (è‡ªåŠ¨æ¸²æŸ“)
- Notionã€Confluence ç­‰æ”¯æŒ Mermaid çš„å·¥å…·

ç¥é¢è¯•æˆåŠŸï¼ğŸš€
